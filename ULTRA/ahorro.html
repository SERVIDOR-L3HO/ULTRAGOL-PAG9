<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ULTRAGOL - Ahorro de Datos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .data-saver-mode {
            --dark: #050505;
            --card-bg: #111;
        }
        .data-saver-mode img {
            display: none !important;
        }
        .data-saver-mode .featured-match-container,
        .data-saver-mode .world-cup-banner {
            display: none !important;
        }
        .data-saver-banner {
            background: #ff4500;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
        }
        .match-card-bg { display: none !important; }
        .match-card { background: #1a1a1a !important; border: 1px solid #333 !important; }
    </style>
</head>
<body class="data-saver-mode">
    <div class="data-saver-banner">MODO AHORRO DE DATOS ACTIVO</div>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <button class="icon-btn back-btn" onclick="window.location.href='index.html'">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="cartoon-clock" id="realTimeClock">--:--</div>
            </div>
            <div class="header-right">
                <div class="online-counter" id="userCount">
                    <span class="online-dot-mini"></span>
                    <span id="onlineCountText">...</span>
                </div>
            </div>
        </header>

        <div class="tabs-container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('live', this)">EN VIVO</button>
                <button class="tab" onclick="switchTab('upcoming', this)">PROXIMOS</button>
            </div>
        </div>

        <div class="content-container">
            <div id="liveContent" class="tab-content active">
                <div class="matches-grid" id="liveMatches">
                    <!-- Contenido dinámico -->
                </div>
            </div>
        </div>

        <nav class="bottom-nav">
            <button class="nav-btn active" onclick="window.location.href='index.html'">
                <i class="fas fa-home"></i>
                <span class="nav-label">Normal</span>
            </button>
        </nav>
    </div>
    <script src="app.js"></script>
    <script>
        // Funciones específicas para el modo ahorro
        function switchTab(tab, element) {
            activeTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            
            if (marcadoresData) {
                if (tab === 'live') updateLiveMatches(marcadoresData);
                else updateUpcomingMatches(marcadoresData);
            }
        }
        
        // Sobrescribir la función de renderizado para forzar el modo ahorro
        const originalUpdateMatches = window.updateLiveMatches;
        window.updateLiveMatches = function(data) {
            const container = document.getElementById('liveMatches');
            if (!container) return;
            container.innerHTML = '';
            
            const liveMatches = (data.partidos || []).filter(m => m.estado === 'EN VIVO' || m.estado === 'MT');
            
            if (liveMatches.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:20px; color:#666;">No hay partidos en vivo en este momento.</div>';
                return;
            }

            liveMatches.forEach(match => {
                const card = document.createElement('div');
                card.className = 'match-card';
                card.style.display = 'flex';
                card.style.flexDirection = 'column';
                card.style.padding = '15px';
                card.style.marginBottom = '10px';
                card.style.background = '#111';
                card.style.border = '1px solid #333';
                card.style.borderRadius = '10px';
                
                card.innerHTML = `
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                        <span style="color:#ff4500; font-weight:bold; font-size:12px;">${match.estado}</span>
                        <span style="color:#666; font-size:12px;">${match.liga || ''}</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <span style="font-weight:bold;">${match.local}</span>
                        <span style="background:#222; padding:2px 10px; border-radius:5px; color:#ff4500;">${match.marcador || '0 - 0'}</span>
                        <span style="font-weight:bold;">${match.visitante}</span>
                    </div>
                    <button onclick="watchMatch('${match.id || ''}')" style="margin-top:15px; background:#ff4500; color:white; border:none; padding:8px; border-radius:5px; font-weight:bold; cursor:pointer;">
                        VER TRANSMISIÓN
                    </button>
                `;
                container.appendChild(card);
            });
        };
    </script>
</body>
</html>